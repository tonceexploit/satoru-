<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Sistem Analisis Anak MI- Ultimate</title>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg: #030305;
            --surface: rgba(20, 20, 25, 0.6);
            --surface-border: rgba(255, 255, 255, 0.08);
            --text-primary: #ffffff;
            --text-secondary: rgba(255, 255, 255, 0.5);
            --danger: #ff2a40;
            --danger-glow: rgba(255, 42, 64, 0.4);
            --safe: #00ff66;
            --safe-glow: rgba(0, 255, 102, 0.4);
            --warning: #ffb800;
            --wa-color: #25D366;
            --ease: cubic-bezier(0.16, 1, 0.3, 1);
            --ease-in-out: cubic-bezier(0.65, 0, 0.35, 1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: 'Plus Jakarta Sans', sans-serif;
            background-color: var(--bg);
            color: var(--text-primary);
            min-height: 100vh;
            min-height: 100dvh;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            user-select: none;
            transition: filter 2s var(--ease);
        }

        /* Digital Degradation Effect */
        body.degraded {
            filter: grayscale(0.8) contrast(1.2) brightness(0.8);
        }

        /* --- BACKGROUND EFFECTS --- */
        .ambient-bg {
            position: fixed;
            inset: -50%;
            z-index: 0;
            background: radial-gradient(circle at 50% 50%, rgba(255, 42, 64, 0.05) 0%, var(--bg) 45%);
            animation: pulse-bg 8s infinite alternate ease-in-out;
            transition: all 1.5s var(--ease);
        }
        
        .ambient-bg.safe-mode {
            background: radial-gradient(circle at 50% 50%, rgba(0, 255, 102, 0.05) 0%, var(--bg) 45%);
        }

        .noise-overlay {
            position: fixed;
            inset: 0;
            z-index: 1;
            opacity: 0.04;
            pointer-events: none;
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E");
        }

        @keyframes pulse-bg { 0% { transform: scale(1); opacity: 0.5; } 100% { transform: scale(1.1); opacity: 1; } }

        /* --- APP CONTAINER --- */
        .app-frame {
            position: relative;
            z-index: 10;
            width: 100%;
            max-width: 440px;
            height: 100dvh;
            display: flex;
            flex-direction: column;
        }

        .screen {
            position: absolute;
            inset: 0;
            padding: clamp(20px, 5vw, 32px);
            padding-bottom: max(24px, env(safe-area-inset-bottom));
            display: flex;
            flex-direction: column;
            opacity: 0;
            pointer-events: none;
            visibility: hidden;
            transform: scale(0.96) translateY(20px);
            transition: opacity 0.5s var(--ease), transform 0.5s var(--ease), visibility 0s 0.5s;
            overflow-y: auto;
            -ms-overflow-style: none;
            scrollbar-width: none;
            -webkit-overflow-scrolling: touch;
        }

        .screen::-webkit-scrollbar { display: none; }

        .screen.active {
            opacity: 1;
            pointer-events: auto;
            visibility: visible;
            transform: scale(1) translateY(0);
            transition: opacity 0.6s var(--ease), transform 0.6s var(--ease);
        }

        /* --- TYPOGRAPHY --- */
        h1 {
            font-size: clamp(2.2rem, 8vw, 3rem);
            font-weight: 800;
            line-height: 1.1;
            letter-spacing: -0.03em;
            margin-bottom: 8px;
            background: linear-gradient(135deg, #fff 0%, rgba(255,255,255,0.4) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        h2 { font-size: clamp(1.3rem, 5vw, 1.7rem); font-weight: 700; margin-bottom: 8px; letter-spacing: -0.02em; }
        p.subtitle { font-size: clamp(0.85rem, 3vw, 0.95rem); color: var(--text-secondary); line-height: 1.6; margin-bottom: 24px; }

        /* --- NAVIGATION & BADGES --- */
        .top-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            min-height: 44px;
            flex-shrink: 0;
        }

        .btn-icon {
            width: 44px; height: 44px;
            border-radius: 50%;
            background: var(--surface);
            border: 1px solid var(--surface-border);
            display: flex; justify-content: center; align-items: center;
            cursor: pointer; color: #fff;
            backdrop-filter: blur(20px);
            transition: all 0.3s var(--ease);
        }
        .btn-icon:hover { background: rgba(255,255,255,0.1); transform: scale(1.05); }
        .btn-icon:active { transform: scale(0.95); }

        .status-badge {
            padding: 6px 14px;
            border-radius: 20px;
            font-size: 0.75rem; font-weight: 700; letter-spacing: 0.05em;
            background: rgba(255, 42, 64, 0.1); color: var(--danger);
            border: 1px solid rgba(255, 42, 64, 0.2);
            display: flex; align-items: center; gap: 6px;
            backdrop-filter: blur(10px);
        }
        .status-badge.pulse::before {
            content: ''; width: 6px; height: 6px; background: currentColor;
            border-radius: 50%; box-shadow: 0 0 8px currentColor;
            animation: blink 2s infinite;
        }
        @keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0.3; } }

        .timer-badge {
            background: rgba(255,255,255,0.05); border: 1px solid var(--surface-border);
            color: #fff; border-radius: 20px; padding: 6px 14px;
            font-size: 0.75rem; font-weight: 600; font-family: monospace; letter-spacing: 0.05em;
        }

        /* --- BUTTONS --- */
        .btn {
            width: 100%; min-height: clamp(52px, 7vh, 60px);
            border-radius: 18px; font-family: inherit;
            font-size: clamp(0.95rem, 4vw, 1.05rem); font-weight: 700;
            border: none; cursor: pointer;
            display: flex; justify-content: center; align-items: center; gap: 10px;
            transition: all 0.3s var(--ease);
            position: relative; overflow: hidden; flex-shrink: 0;
            text-decoration: none;
        }
        .btn::after {
            content: ''; position: absolute; inset: 0;
            background: linear-gradient(180deg, rgba(255,255,255,0.15) 0%, transparent 100%);
            opacity: 0; transition: opacity 0.3s ease;
        }
        .btn:hover::after { opacity: 1; }
        .btn:active { transform: scale(0.96); }

        .btn-primary { background: #ffffff; color: #000000; box-shadow: 0 8px 24px rgba(255,255,255,0.1); }
        .btn-danger { background: var(--danger); color: #ffffff; box-shadow: 0 8px 24px var(--danger-glow); }
        .btn-outline-safe { background: rgba(0, 255, 102, 0.05); border: 1px solid rgba(0, 255, 102, 0.3); color: var(--safe); }
        .btn-outline-safe:hover { background: rgba(0, 255, 102, 0.15); border-color: var(--safe); box-shadow: 0 8px 24px var(--safe-glow); }
        .btn-wa { background: rgba(37, 211, 102, 0.1); border: 1px solid rgba(37, 211, 102, 0.3); color: var(--wa-color); }
        .btn-wa:hover { background: var(--wa-color); color: #fff; box-shadow: 0 8px 24px rgba(37, 211, 102, 0.3); }

        /* --- SCENARIO CARDS --- */
        .scenario-list { display: flex; flex-direction: column; gap: clamp(10px, 1.5vh, 12px); flex: 1; padding-bottom: 20px; }
        .card {
            background: var(--surface); backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px);
            border: 1px solid var(--surface-border); border-radius: 20px;
            padding: clamp(16px, 2.5vh, 20px); cursor: pointer;
            display: flex; align-items: center; gap: 16px;
            transition: all 0.4s var(--ease);
        }
        .card:hover { background: rgba(30, 30, 35, 0.8); border-color: rgba(255, 255, 255, 0.2); transform: translateY(-3px) scale(1.01); box-shadow: 0 15px 30px rgba(0,0,0,0.4); }
        .card:active { transform: translateY(0) scale(0.98); }
        .card-icon {
            width: clamp(50px, 12vw, 56px); height: clamp(50px, 12vw, 56px);
            border-radius: 16px; background: rgba(255,255,255,0.05);
            display: flex; justify-content: center; align-items: center;
            font-size: clamp(1.4rem, 5vw, 1.6rem); flex-shrink: 0; box-shadow: inset 0 2px 10px rgba(255,255,255,0.05);
        }
        .card-content { flex: 1; min-width: 0; }
        .card-title { font-size: clamp(0.95rem, 4vw, 1.05rem); font-weight: 600; margin-bottom: 4px; color: #fff; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        .card-desc { font-size: clamp(0.75rem, 3vw, 0.85rem); color: var(--text-secondary); }
        .card-severity { display: flex; gap: 4px; margin-top: 8px; }
        .dot { width: 5px; height: 5px; border-radius: 50%; background: var(--surface-border); }
        .dot.active { background: var(--danger); box-shadow: 0 0 8px var(--danger); }
        .dot.warning { background: var(--warning); box-shadow: 0 0 8px var(--warning); }

        /* --- DASHBOARD RESULT --- */
        .result-wrapper { flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 10px 0; min-height: max-content; }
        .main-meter { position: relative; width: clamp(180px, 40vh, 240px); height: clamp(180px, 40vh, 240px); margin-bottom: clamp(16px, 3vh, 30px); flex-shrink: 0; }
        .svg-meter { width: 100%; height: 100%; transform: rotate(-90deg); }
        .meter-bg { fill: none; stroke: var(--surface); stroke-width: 14; }
        .meter-fill {
            fill: none; stroke: url(#danger-grad); stroke-width: 14; stroke-linecap: round;
            stroke-dasharray: 753.98; stroke-dashoffset: 753.98;
            filter: drop-shadow(0 0 12px var(--danger-glow));
            transition: stroke-dashoffset 1.5s var(--ease-in-out), stroke 0.5s ease;
        }
        .meter-content { position: absolute; inset: 0; display: flex; flex-direction: column; justify-content: center; align-items: center; }
        .score-val {
            font-size: clamp(3.5rem, 12vw, 4.5rem); font-weight: 800; line-height: 1;
            background: linear-gradient(180deg, #fff 0%, #aaa 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent;
            text-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }
        .score-lbl { font-size: clamp(0.7rem, 2.5vw, 0.8rem); font-weight: 700; letter-spacing: 0.2em; color: var(--danger); text-transform: uppercase; margin-top: 4px; }

        /* --- STATS --- */
        .stats-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: clamp(8px, 2vw, 12px); width: 100%; margin-bottom: clamp(20px, 4vh, 32px); flex-shrink: 0; }
        .stat-card {
            background: var(--surface); border: 1px solid var(--surface-border);
            border-radius: 14px; padding: clamp(10px, 2vh, 16px) 8px;
            display: flex; flex-direction: column; align-items: center; text-align: center;
            opacity: 0; transform: translateY(20px);
        }
        .stat-card.show { opacity: 1; transform: translateY(0); transition: all 0.6s var(--ease); }
        .stat-card:nth-child(1) { transition-delay: 0.8s; }
        .stat-card:nth-child(2) { transition-delay: 1.0s; }
        .stat-card:nth-child(3) { transition-delay: 1.2s; }
        .stat-num { font-size: clamp(1.2rem, 5vw, 1.4rem); font-weight: 800; color: #fff; margin-bottom: 2px; }
        .stat-txt { font-size: clamp(0.6rem, 2vw, 0.65rem); color: var(--text-secondary); text-transform: uppercase; letter-spacing: 0.05em; }

        .action-group { width: 100%; display: flex; flex-direction: column; gap: 12px; margin-top: auto; opacity: 0; transform: translateY(20px); flex-shrink: 0; }
        .action-group.show { opacity: 1; transform: translateY(0); transition: all 0.6s var(--ease) 1.5s; }
        
        /* Sub-action group (Share) */
        .sub-action { display: none; width: 100%; animation: fadeUp 0.6s var(--ease) forwards; }
        @keyframes fadeUp { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* --- ABOUT SCREEN --- */
        .about-wrapper { flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; padding-bottom: 10vh; }
        .profile-img {
            width: clamp(100px, 25vw, 120px); height: clamp(100px, 25vw, 120px);
            border-radius: 32px; object-fit: cover; margin-bottom: 24px;
            border: 2px solid rgba(255,255,255,0.1);
            box-shadow: 0 20px 40px rgba(0,0,0,0.5), inset 0 0 20px rgba(255,255,255,0.05);
            transform: rotate(-3deg); transition: transform 0.4s var(--ease);
        }
        .profile-img:hover { transform: rotate(0deg) scale(1.05); }
        .dev-name { font-size: clamp(1.1rem, 4vw, 1.3rem); font-weight: 800; text-align: center; margin-bottom: 12px; }

        .glitch { animation: glitch-anim 0.3s cubic-bezier(.25, .46, .45, .94) both infinite; }
        @keyframes glitch-anim { 0% { transform: translate(0) } 20% { transform: translate(-2px, 2px) } 40% { transform: translate(-2px, -2px) } 60% { transform: translate(2px, 2px) } 80% { transform: translate(2px, -2px) } 100% { transform: translate(0) } }

        /* Radar Loading */
        .radar-box { position: relative; width: clamp(140px, 35vw, 180px); height: clamp(140px, 35vw, 180px); margin: 0 auto 32px auto; }
        .radar-grid { position: absolute; inset: 0; border-radius: 50%; border: 1px dashed rgba(255, 42, 64, 0.3); animation: spin-slow 10s linear infinite; }
        .radar-core { position: absolute; inset: 20px; border-radius: 50%; border: 2px solid var(--danger); filter: drop-shadow(0 0 15px var(--danger-glow)); opacity: 0.5; animation: pulse-core 2s ease-in-out infinite alternate; }
        .radar-sweep { position: absolute; inset: 0; border-radius: 50%; background: conic-gradient(from 0deg, transparent 70%, rgba(255, 42, 64, 0.8) 100%); animation: spin 1.5s linear infinite; mask-image: radial-gradient(transparent 50%, black 51%); -webkit-mask-image: radial-gradient(transparent 50%, black 51%); }
        .radar-data { position: absolute; inset: 0; display: flex; justify-content: center; align-items: center; font-family: monospace; font-size: clamp(1.2rem, 5vw, 1.5rem); color: var(--danger); text-shadow: 0 0 8px var(--danger); }
        @keyframes spin { 100% { transform: rotate(360deg); } }
        @keyframes spin-slow { 100% { transform: rotate(-360deg); } }
        @keyframes pulse-core { 0% { transform: scale(0.95); opacity: 0.3; } 100% { transform: scale(1.05); opacity: 0.8; } }

    </style>
</head>
<body>

    <div class="ambient-bg" id="ambientBg"></div>
    <div class="noise-overlay"></div>

    <main class="app-frame">
        
        <div id="screen-hero" class="screen active">
            <div class="top-bar">
                <div class="timer-badge" id="maghrib-timer">18:00:00</div>
                <button class="btn-icon" onclick="nav('screen-about')" title="Tentang Developer">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="3"></circle><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path></svg>
                </button>
            </div>
            <div style="flex: 1; display: flex; flex-direction: column; justify-content: center;">
                <div class="status-badge pulse" style="width: fit-content; margin-bottom: clamp(16px, 4vh, 24px);">SISTEM ANALISIS DOSA MI</div>
                <h1>Simulasi<br>Mokel OS</h1>
                <p class="subtitle">Platform kalkulasi kerugian spiritual dan risiko sosial secara real-time. Hitung probabilitas sebelum imanmu runtuh.</p>
            </div>
            <div class="action-group show" style="margin-top: 0; opacity: 1; transform: none;">
                <button class="btn btn-primary" onclick="initAudio(); nav('screen-scenarios')">
                    Inisiasi Simulasi
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><line x1="5" y1="12" x2="19" y2="12"></line><polyline points="12 5 19 12 12 19"></polyline></svg>
                </button>
            </div>
        </div>

        <div id="screen-about" class="screen">
            <div class="top-bar">
                <button class="btn-icon" onclick="nav('screen-hero')">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><line x1="19" y1="12" x2="5" y2="12"></line><polyline points="12 19 5 12 12 5"></polyline></svg>
                </button>
                <div class="status-badge" style="color: #00ccff; background: rgba(0, 204, 255, 0.1); border-color: rgba(0, 204, 255, 0.2);">
                    ABOUT DEVELOPER
                </div>
            </div>
            <div class="about-wrapper">
                <img src="https://f.top4top.io/p_37064zv590.png" alt="Profile" class="profile-img">
                <h2 class="dev-name">CREATE BY RALD</h2>
                <p class="subtitle" style="text-align: center;">Senior Frontend Engineer & AI Prompt Designer.<br>Bergabunglah dengan channel untuk mendapatkan update project eksklusif, source code UI/UX premium, dan AI insights terkini.</p>
                <a href="https://whatsapp.com/channel/0029VbBjyjlJ93wa6hwSWa0p" target="_blank" class="btn btn-wa" style="margin-top: 20px;">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51a12.8 12.8 0 0 0-.57-.01c-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 0 1-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 0 1-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 0 1 2.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0 0 12.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 0 0 5.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 0 0-3.48-8.413z"/></svg>
                    Join Channel WhatsApp
                </a>
            </div>
        </div>

        <div id="screen-scenarios" class="screen">
            <div class="top-bar">
                <button class="btn-icon" onclick="nav('screen-hero')">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><line x1="19" y1="12" x2="5" y2="12"></line><polyline points="12 19 5 12 12 5"></polyline></svg>
                </button>
                <div class="status-badge pulse" style="background: rgba(255,184,0,0.1); color: var(--warning); border-color: rgba(255,184,0,0.2);">DATABASE PELANGGARAN</div>
            </div>

            <h2>Pilih Godaan</h2>
            <p class="subtitle">Tindakan apa yang sedang memanipulasi logikamu saat ini?</p>

            <div class="scenario-list">
                <div class="card" onclick="startAnalysis('Makan Sembunyi', 85, 90, 80)">
                    <div class="card-icon">üçî</div>
                    <div class="card-content">
                        <div class="card-title">Makan Sembunyi-sembunyi</div>
                        <div class="card-desc">Keparahan: Tinggi</div>
                        <div class="card-severity"><div class="dot active"></div><div class="dot active"></div><div class="dot active"></div><div class="dot warning"></div></div>
                    </div>
                </div>
                <div class="card" onclick="startAnalysis('Tarik Sebat', 75, 95, 70)">
                    <div class="card-icon">üö¨</div>
                    <div class="card-content">
                        <div class="card-title">Tarik Sebat di Toilet</div>
                        <div class="card-desc">Risiko ketahuan: Ekstrem</div>
                        <div class="card-severity"><div class="dot active"></div><div class="dot active"></div><div class="dot warning"></div><div class="dot warning"></div></div>
                    </div>
                </div>
                <div class="card" onclick="startAnalysis('Es Teh Siang Bolong', 65, 50, 60)">
                    <div class="card-icon">üßä</div>
                    <div class="card-content">
                        <div class="card-title">Teguk Es Teh Manis</div>
                        <div class="card-desc">Godaan visual: Sangat Tinggi</div>
                        <div class="card-severity"><div class="dot active"></div><div class="dot warning"></div><div class="dot warning"></div><div class="dot"></div></div>
                    </div>
                </div>
                <div class="card" onclick="startAnalysis('Batal Sengaja', 100, 100, 100)">
                    <div class="card-icon">‚ö†Ô∏è</div>
                    <div class="card-content">
                        <div class="card-title">Deklarasi Batal</div>
                        <div class="card-desc">Menyerah tanpa perlawanan</div>
                        <div class="card-severity"><div class="dot active"></div><div class="dot active"></div><div class="dot active"></div><div class="dot active"></div></div>
                    </div>
                </div>
            </div>
        </div>

        <div id="screen-loading" class="screen">
            <div style="flex: 1; display: flex; flex-direction: column; justify-content: center; align-items: center; min-height: 50vh;">
                <div class="radar-box">
                    <div class="radar-grid"></div>
                    <div class="radar-core"></div>
                    <div class="radar-sweep"></div>
                    <div class="radar-data" id="scan-code">0x00</div>
                </div>
                <h2 style="text-align: center; color: var(--danger);">MENGKALKULASI KERUGIAN</h2>
                <p class="subtitle" style="text-align: center;" id="scan-text">Menyambungkan ke sistem pencatat amal...</p>
            </div>
        </div>

        <div id="screen-result" class="screen">
            <div class="top-bar">
                <button class="btn-icon" onclick="resetSystem()">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><polyline points="1 4 1 10 7 10"></polyline><path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"></path></svg>
                </button>
                <div class="status-badge pulse" id="result-badge">HASIL ANALISIS</div>
            </div>

            <div class="result-wrapper">
                <div class="main-meter">
                    <svg class="svg-meter" viewBox="0 0 260 260" preserveAspectRatio="xMidYMid meet">
                        <defs>
                            <linearGradient id="danger-grad" x1="0%" y1="100%" x2="100%" y2="0%">
                                <stop offset="0%" stop-color="#ff2a40" /><stop offset="100%" stop-color="#ff007b" />
                            </linearGradient>
                            <linearGradient id="safe-grad" x1="0%" y1="100%" x2="100%" y2="0%">
                                <stop offset="0%" stop-color="#00ff66" /><stop offset="100%" stop-color="#00ccff" />
                            </linearGradient>
                        </defs>
                        <circle class="meter-bg" cx="130" cy="130" r="120"></circle>
                        <circle class="meter-fill" id="meter-ring" cx="130" cy="130" r="120"></circle>
                    </svg>
                    <div class="meter-content">
                        <div class="score-val" id="val-total">0</div>
                        <div class="score-lbl" id="lbl-total">Akumulasi Dosa</div>
                    </div>
                </div>

                <div class="stats-grid">
                    <div class="stat-card"><div class="stat-num"><span id="val-guilt">0</span>%</div><div class="stat-txt">Rasa Bersalah</div></div>
                    <div class="stat-card"><div class="stat-num"><span id="val-risk">0</span>%</div><div class="stat-txt">Risiko Sosial</div></div>
                    <div class="stat-card"><div class="stat-num"><span id="val-loss">0</span>%</div><div class="stat-txt">Hilang Berkah</div></div>
                </div>

                <div class="action-group" id="action-btns">
                    <button class="btn btn-danger" id="btn-execute" onclick="executeMokel()">üòà EKSEKUSI (Batal)</button>
                    <button class="btn btn-outline-safe" id="btn-hold" onclick="executeHold()">üõ°Ô∏è TAHAN (Lanjutkan Puasa)</button>
                </div>
                
                <div class="sub-action" id="share-area">
                    <button class="btn btn-wa" onclick="shareReport()">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51a12.8 12.8 0 0 0-.57-.01c-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 0 1-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 0 1-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 0 1 2.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0 0 12.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 0 0 5.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 0 0-3.48-8.413z"/></svg>
                        Share Laporan ke WA
                    </button>
                </div>
            </div>
        </div>

    </main>

    <script>
        let simData = { name: '', total: 0, guilt: 0, risk: 0, loss: 0 };
        const CIRCUMFERENCE = 2 * Math.PI * 120; // 753.98
        let isFinalized = false;
        let audioCtx;
        let finalStatus = "";

        // Ambient Audio Logic
        function initAudio() {
            if (!audioCtx) {
                audioCtx = new (window.AudioContext || window.webkitAudioContext)();
                const osc = audioCtx.createOscillator();
                const gain = audioCtx.createGain();
                osc.type = 'sine';
                osc.frequency.setValueAtTime(50, audioCtx.currentTime); // Low hum
                gain.gain.setValueAtTime(0, audioCtx.currentTime);
                gain.gain.linearRampToValueAtTime(0.1, audioCtx.currentTime + 2);
                osc.connect(gain);
                gain.connect(audioCtx.destination);
                osc.start();
            } else if (audioCtx.state === 'suspended') {
                audioCtx.resume();
            }
        }

        // Timer Logic
        function updateTimer() {
            const now = new Date();
            const maghrib = new Date();
            maghrib.setHours(18, 0, 0, 0);
            if (now > maghrib) maghrib.setDate(maghrib.getDate() + 1);
            
            const diff = maghrib - now;
            const h = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const m = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
            const s = Math.floor((diff % (1000 * 60)) / 1000);
            document.getElementById('maghrib-timer').innerText = `T-Minus ${h}j ${m}m`;
        }
        setInterval(updateTimer, 60000);
        updateTimer();

        function nav(targetId) {
            document.querySelectorAll('.screen').forEach(el => {
                el.classList.remove('active');
                setTimeout(() => el.scrollTop = 0, 500);
            });
            document.getElementById(targetId).classList.add('active');
            if (navigator.vibrate) navigator.vibrate(10);
        }

        function resetSystem() {
            isFinalized = false;
            finalStatus = "";
            document.body.classList.remove('degraded');
            document.getElementById('ambientBg').className = 'ambient-bg';
            document.getElementById('meter-ring').style.stroke = 'url(#danger-grad)';
            document.getElementById('meter-ring').style.filter = 'drop-shadow(0 0 12px var(--danger-glow))';
            
            document.getElementById('action-btns').style.display = 'flex';
            document.getElementById('share-area').style.display = 'none';
            
            document.getElementById('lbl-total').innerText = 'Akumulasi Dosa';
            document.getElementById('lbl-total').style.color = 'var(--danger)';
            document.getElementById('val-total').style.color = '';
            document.getElementById('val-total').classList.remove('glitch');
            document.getElementById('result-badge').innerHTML = 'HASIL ANALISIS';
            document.getElementById('result-badge').style.color = 'var(--danger)';
            document.getElementById('result-badge').style.background = 'rgba(255, 42, 64, 0.1)';
            document.getElementById('result-badge').style.borderColor = 'rgba(255, 42, 64, 0.2)';
            
            document.querySelectorAll('.stat-card').forEach(c => c.classList.remove('show'));
            document.getElementById('action-btns').classList.remove('show');
            nav('screen-hero');
        }

        function startAnalysis(name, g, r, l) {
            simData = { name: name, total: Math.floor((g + r + l) / 3), guilt: g, risk: r, loss: l };
            nav('screen-loading');
            if (navigator.vibrate) navigator.vibrate([10, 50, 10]);

            const hexInterval = setInterval(() => { document.getElementById('scan-code').innerText = '0x' + Math.floor(Math.random()*16777215).toString(16).toUpperCase(); }, 50);
            const texts = ["Mengakses log niat...", "Menghitung probabilitas penyesalan...", "Menarik kesimpulan akhir..."];
            let tIdx = 0;
            const textInterval = setInterval(() => { tIdx++; if(tIdx < texts.length) document.getElementById('scan-text').innerText = texts[tIdx]; }, 800);

            setTimeout(() => { clearInterval(hexInterval); clearInterval(textInterval); showDashboard(); }, 2600);
        }

        function showDashboard() {
            nav('screen-result');
            setTimeout(() => { document.querySelectorAll('.stat-card').forEach(c => c.classList.add('show')); document.getElementById('action-btns').classList.add('show'); }, 100);
            animateValue('val-total', 0, simData.total, 1500);
            animateValue('val-guilt', 0, simData.guilt, 1500);
            animateValue('val-risk', 0, simData.risk, 1500);
            animateValue('val-loss', 0, simData.loss, 1500);
            setTimeout(() => { document.getElementById('meter-ring').style.strokeDashoffset = CIRCUMFERENCE - (simData.total / 100) * CIRCUMFERENCE; }, 50);
        }

        function animateValue(id, start, end, duration) {
            const obj = document.getElementById(id); let startTimestamp = null;
            const step = (timestamp) => {
                if (!startTimestamp) startTimestamp = timestamp;
                const progress = Math.min((timestamp - startTimestamp) / duration, 1);
                obj.innerHTML = Math.floor((1 - Math.pow(1 - progress, 4)) * (end - start) + start);
                if (progress < 1) window.requestAnimationFrame(step);
            }; window.requestAnimationFrame(step);
        }

        function executeMokel() {
            if (isFinalized) return;
            finalStatus = "Tumbang Oleh Nafsu üòà";
            if (navigator.vibrate) navigator.vibrate([50, 100, 150]);
            
            document.body.classList.add('degraded');
            const ring = document.getElementById('meter-ring');
            ring.classList.add('glitch');
            document.getElementById('val-total').classList.add('glitch');
            document.getElementById('val-total').style.color = '#ff2a40';
            
            animateValue('val-total', simData.total, 99, 500);
            animateValue('val-guilt', simData.guilt, 99, 500);
            animateValue('val-risk', simData.risk, 99, 500);
            animateValue('val-loss', simData.loss, 99, 500);
            ring.style.strokeDashoffset = CIRCUMFERENCE - (99 / 100) * CIRCUMFERENCE;

            document.getElementById('action-btns').style.display = 'none';
            document.getElementById('share-area').style.display = 'block';
        }

        function executeHold() {
            if (isFinalized) return;
            isFinalized = true;
            finalStatus = "Iman Tak Tergoyahkan üõ°Ô∏è";
            if (navigator.vibrate) navigator.vibrate(50);

            document.getElementById('ambientBg').className = 'ambient-bg safe-mode';
            document.getElementById('meter-ring').style.stroke = 'url(#safe-grad)';
            document.getElementById('meter-ring').style.filter = 'drop-shadow(0 0 20px var(--safe-glow))';
            document.getElementById('lbl-total').innerText = 'Pertahanan Berhasil';
            document.getElementById('lbl-total').style.color = 'var(--safe)';
            document.getElementById('result-badge').innerHTML = 'STATUS: AMAN';
            document.getElementById('result-badge').style.color = 'var(--safe)';
            document.getElementById('result-badge').style.background = 'rgba(0, 255, 102, 0.1)';
            document.getElementById('result-badge').style.borderColor = 'rgba(0, 255, 102, 0.2)';

            animateValue('val-total', simData.total, 0, 1500);
            animateValue('val-guilt', simData.guilt, 0, 1500);
            animateValue('val-risk', simData.risk, 0, 1500);
            animateValue('val-loss', simData.loss, 0, 1500);
            document.getElementById('meter-ring').style.strokeDashoffset = CIRCUMFERENCE;

            document.getElementById('action-btns').style.display = 'none';
            document.getElementById('share-area').style.display = 'block';
        }

        function shareReport() {
            const text = `*SISTEM ANALISIS MOKEL OS*%0A%0Aüõë Godaan: ${simData.name}%0Aüìä Level Konsekuensi: ${simData.total}%25%0A‚ö†Ô∏è Risiko Sosial: ${simData.risk}%25%0A%0A*KEPUTUSAN AKHIR:*%0A${finalStatus}%0A%0A"Uji ketahanan imanmu sekarang sebelum runtuh total!"`;
            window.open(`https://wa.me/?text=${text}`, '_blank');
        }

        // Tilt effect (Desktop)
        if (window.matchMedia("(pointer: fine)").matches) {
            document.querySelectorAll('.card').forEach(card => {
                card.addEventListener('mousemove', e => {
                    const rect = card.getBoundingClientRect();
                    const rotateX = (((e.clientY - rect.top) - (rect.height / 2)) / (rect.height / 2)) * -8;
                    const rotateY = (((e.clientX - rect.left) - (rect.width / 2)) / (rect.width / 2)) * 8;
                    card.style.transform = `perspective(1000px) rotateX(${rotateX}deg) rotateY(${rotateY}deg) translateY(-3px) scale(1.01)`;
                });
                card.addEventListener('mouseleave', () => card.style.transform = `perspective(1000px) rotateX(0deg) rotateY(0deg) translateY(0) scale(1)`);
            });
        }
    </script>
</body>
</html>